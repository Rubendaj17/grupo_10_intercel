<!DOCTYPE html>
<html lang="en">
<head>
    <%- include ('../partials/head') %> 
    <title>Intercel - Nuevo producto</title>
    <link rel="stylesheet" href="/css/NewEditProduct.css">
    <link rel="stylesheet" href="/css/headerFooter.css">
</head>
<body>      
    <!-- HEADER -->
    <%- include('../partials/header') %>
       
        <div class="container">
        <a href="/"> <img src="/images/logos/Logo.svg" width="200"> </a>
        <h2>Nuevo producto</h2>
            
        <form class="createForm" action="/products/create" method="POST" enctype="multipart/form-data">
                <br>
                <div class="formControl">
                    <label>Marca</label>
                    <input type="text" name="brand" class="inputControl" value="<%= locals.errors && userChoices ? userChoices.brand.name : brandToUse.name %>">
                
                    <% if (locals.errors && errors.brand) { %>
                        <p class="errorMsg"> <%= errors.brand.msg %> </p>
                    <% } %>

                    <label>Logo</label>
                    <input type="file" name="logo" class="inputControl">

                    <div class="currentImage">
                        <img src="<%= locals.errors ? userChoices.brand.imageToUse : brandToUse.imageToUse %>" alt="">
                        <span>'Imagen actual'</span>
                    </div> 

                </div>

                <div class="formControl">
                    <label>Modelo</label>
                    <input type="text" name="model" class="inputControl" required value="<%= locals.errors ? userChoices.model.name : modelToUse.model %>">
                
                    <% if (locals.errors && errors.model) { %>
                        <p class="errorMsg"> <%= errors.model.msg %> </p>
                    <% } %>

                    <label>Imagen Principal</label>
                
                    <input type="file" name="modelMainImage" class="inputControl">
                    
                    <div class="currentImage">
                        <img src=" <%= locals.errors ? userChoices.model.imageToUse : modelToUse.imageToUse %>" alt="">
                        <span>Imagen actual</span>
                    </div> 

                </div>
                
                <div class="formControl">
                    <label>Color</label>
                    <select name="color" id="color">
                        <% colorList.forEach( e => { %>
        
                            <option value="<%=e.id%>" <%= locals.errors && userChoices.color == e.id ? 'selected' : '' %> > <%= e.name %> </option>
        
                        <% }) %> 
                    </select>        
                </div>
                
                <div class="formControl">
                    <label>Almacenamiento</label>
                    <select name="ram" id="ram">
                        <% ramList.forEach( e => { %>
        
                            <option value="<%=e.id%>" <%= locals.errors && userChoices.ram == e.id ? 'selected' : '' %>> <%= e.storage %> </option>
        
                        <% }) %> 
                    </select>
                </div>

                <div class="formControl">
                    <label>Precio</label>
                    <input type="tel" name="price" class="inputControl" minlength="1" value="<%= locals.errors ? userChoices.price : '' %>">

                    <% if (locals.errors && errors.price) { %>
                        <p class="errorMsg"> <%= errors.price.msg %> </p>
                    <% } %>

                </div>

                <div  class="formControl">
                    <label for="">Este producto esta en oferta?</label>
                    <input type="radio" name="offer" value=1 <%= locals.errors && userChoices.offer == 1 ? 'checked' : '' %>/>Si
                    <input type="radio" name="offer" value=0 <%= locals.errors && userChoices.offer == 0 ? 'checked' : '' %>/>No
                </div>

                <div class="formControl">
                    <label>Imagen 1</label>
                    <input type="file" name="imageOne" accept = ".jpg, .png" class="inputControl ">
                    <% if (locals.errors && errors.imageOne) { %>
                        <p class="errorMsg"> <%= errors.imageOne.msg %> </p>
                    <% } %>

                    <label>Imagen 2</label>
                    <input type="file" name="imageTwo" accept = ".jpg, .png" class="inputControl ">
                    <% if (locals.errors && errors.imageTwo) { %>
                        <p class="errorMsg"> <%= errors.imageTwo.msg %> </p>
                    <% } %>

                    <label>Imagen 3</label>
                    <input type="file" name="imageThree" accept = ".jpg, .png" class="inputControl ">
                    <% if (locals.errors && errors.imageThree) { %>
                        <p class="errorMsg"> <%= errors.imageThree.msg %> </p>
                    <% } %>

                </div>                
            
                <button type="submit" class="formButton">Crear producto</button>
            
            </form>
        </div>
    <!-- FOOTER -->
    <footer>
        <%- include('../partials/footer') %>
    </footer>
</body>

</html>